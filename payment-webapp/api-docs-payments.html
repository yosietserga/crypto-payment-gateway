<!-- API Navigation -->
<div class="card mb-4">
    <div class="card-body">
        <nav class="nav nav-pills nav-justified">
            <a class="nav-link" href="api-docs.html"><i class="bi bi-house-door me-1"></i> Overview</a>
            <a class="nav-link active" href="api-docs-payments.html"><i class="bi bi-wallet2 me-1"></i> Payments</a>
            <a class="nav-link" href="api-docs-payouts.html"><i class="bi bi-send me-1"></i> Payouts</a>
            <a class="nav-link" href="api-docs-webhooks.html"><i class="bi bi-hdd-network me-1"></i> Webhooks</a>
            <a class="nav-link" href="api-docs-apikeys.html"><i class="bi bi-key me-1"></i> API Keys</a>
        </nav>
    </div>
</div>

<!-- Payment Endpoints Section -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h2 id="payments">Payment API Endpoints</h2>
            </div>
            <div class="card-body">
                <!-- Generate Payment Address Endpoint -->
                <div class="endpoint">
                    <span class="badge bg-success">POST</span>
                    <span class="endpoint-path">/merchant/payment-addresses</span>
                    <h3>Generate Payment Address</h3>
                    <p>Creates a new crypto payment address for receiving payments.</p>
                    
                    <h4 class="mt-4">Request Parameters</h4>
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>currency</code></td>
                                <td>String</td>
                                <td>Yes</td>
                                <td>Cryptocurrency code (USDT)</td>
                            </tr>
                            <tr>
                                <td><code>expectedAmount</code></td>
                                <td>Numeric</td>
                                <td>Yes</td>
                                <td>Expected payment amount</td>
                            </tr>
                            <tr>
                                <td><code>callbackUrl</code></td>
                                <td>String</td>
                                <td>No</td>
                                <td>URL to redirect after payment completion</td>
                            </tr>
                            <tr>
                                <td><code>expiresAt</code></td>
                                <td>String</td>
                                <td>No</td>
                                <td>ISO8601 datetime for payment expiry</td>
                            </tr>
                            <tr>
                                <td><code>metadata</code></td>
                                <td>Object</td>
                                <td>No</td>
                                <td>Additional data for payment</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Example Requests</h4>
                    
                    <!-- cURL Example -->
                    <div class="code-block">
                        <div class="code-header">cURL</div>
                        <pre class="code-content"><code>curl -X POST "https://eoscryptopago.com/api/v1/merchant/payment-addresses" \
-H "Authorization: Bearer YOUR_API_KEY" \
-H "Content-Type: application/json" \
-d '{
  "currency": "USDT",
  "expectedAmount": 100.00,
  "callbackUrl": "https://your-website.com/payment-complete",
  "metadata": {
    "orderId": "ORDER-12345",
    "customerEmail": "customer@example.com",
    "description": "Payment for Order #12345",
    "fiatCurrency": "USD"
  }
}'</code></pre>
                    </div>
                    
                    <!-- JavaScript Example -->
                    <div class="code-block">
                        <div class="code-header">JavaScript</div>
                        <pre class="code-content"><code>const generatePayment = async () => {
  try {
    const response = await fetch('https://eoscryptopago.com/api/v1/merchant/payment-addresses', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        currency: 'USDT',
        expectedAmount: 100.00,
        callbackUrl: 'https://your-website.com/payment-complete',
        metadata: {
          orderId: 'ORDER-12345',
          customerEmail: 'customer@example.com',
          description: 'Payment for Order #12345',
          fiatCurrency: 'USD'
        }
      })
    });
    
    const data = await response.json();
    console.log('Payment address generated:', data);
    return data;
  } catch (error) {
    console.error('Error generating payment address:', error);
    throw error;
  }
};</code></pre>
                    </div>
                    
                    <!-- PHP Example -->
                    <div class="code-block">
                        <div class="code-header">PHP</div>
                        <pre class="code-content"><code>function generatePaymentAddress() {
    $apiKey = 'YOUR_API_KEY';
    $url = 'https://eoscryptopago.com/api/v1/merchant/payment-addresses';
    
    $data = [
        'currency' => 'USDT',
        'expectedAmount' => 100.00,
        'callbackUrl' => 'https://your-website.com/payment-complete',
        'metadata' => [
            'orderId' => 'ORDER-12345',
            'customerEmail' => 'customer@example.com',
            'description' => 'Payment for Order #12345',
            'fiatCurrency' => 'USD'
        ]
    ];
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Authorization: Bearer ' . $apiKey,
        'Content-Type: application/json'
    ]);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode == 201) {
        return json_decode($response, true);
    } else {
        $error = json_decode($response, true);
        throw new Exception('Error generating payment address: ' . 
                           ($error['message'] ?? 'Unknown error'));
    }
}</code></pre>
                    </div>
                    
                    <h4 class="mt-4">Response Example</h4>
                    <div class="code-block">
                        <div class="code-header">JSON Response</div>
                        <pre class="code-content"><code>{
  "success": true,
  "data": {
    "id": "a1b2c3d4-e5f6-7890-abcd-1234567890ab",
    "address": "0xA1B2C3D4E5F67890ABCD1234567890ABCDEF1234",
    "qrCode": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUg...",
    "currency": "USDT",
    "expectedAmount": "100.00",
    "status": "ACTIVE",
    "createdAt": "2025-05-18T10:00:00.000Z",
    "expiresAt": "2025-05-18T10:30:00.000Z",
    "metadata": {
      "orderId": "ORDER-12345",
      "customerEmail": "customer@example.com",
      "description": "Payment for Order #12345",
      "fiatCurrency": "USD"
    }
  }
}</code></pre>
                    </div>
                </div>
                
                <!-- Get Payment By ID Endpoint -->
                <div class="endpoint">
                    <span class="badge bg-primary">GET</span>
                    <span class="endpoint-path">/merchant/payment-addresses/{id}</span>
                    <h3>Get Payment Address</h3>
                    <p>Retrieves details about a specific payment address.</p>
                    
                    <h4 class="mt-4">Path Parameters</h4>
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>id</code></td>
                                <td>String</td>
                                <td>Payment address ID</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Example Requests</h4>
                    
                    <!-- cURL Example -->
                    <div class="code-block">
                        <div class="code-header">cURL</div>
                        <pre class="code-content"><code>curl -X GET "https://eoscryptopago.com/api/v1/merchant/payment-addresses/a1b2c3d4-e5f6-7890-abcd-1234567890ab" \
-H "Authorization: Bearer YOUR_API_KEY"</code></pre>
                    </div>
                    
                    <!-- JavaScript Example -->
                    <div class="code-block">
                        <div class="code-header">JavaScript</div>
                        <pre class="code-content"><code>const getPaymentAddress = async (id) => {
  try {
    const response = await fetch(`https://eoscryptopago.com/api/v1/merchant/payment-addresses/${id}`, {
      method: 'GET',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    });
    
    const data = await response.json();
    console.log('Payment address details:', data);
    return data;
  } catch (error) {
    console.error('Error fetching payment address:', error);
    throw error;
  }
};</code></pre>
                    </div>
                    
                    <!-- PHP Example -->
                    <div class="code-block">
                        <div class="code-header">PHP</div>
                        <pre class="code-content"><code>function getPaymentAddress($id) {
    $apiKey = 'YOUR_API_KEY';
    $url = 'https://eoscryptopago.com/api/v1/merchant/payment-addresses/' . $id;
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Authorization: Bearer ' . $apiKey
    ]);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode == 200) {
        return json_decode($response, true);
    } else {
        $error = json_decode($response, true);
        throw new Exception('Error fetching payment address: ' . 
                           ($error['message'] ?? 'Unknown error'));
    }
}</code></pre>
                    </div>
                    
                    <h4 class="mt-4">Response Example</h4>
                    <div class="code-block">
                        <div class="code-header">JSON Response</div>
                        <pre class="code-content"><code>{
  "success": true,
  "data": {
    "id": "a1b2c3d4-e5f6-7890-abcd-1234567890ab",
    "address": "0xA1B2C3D4E5F67890ABCD1234567890ABCDEF1234",
    "qrCode": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUg...",
    "currency": "USDT",
    "expectedAmount": "100.00",
    "receivedAmount": "100.00",
    "status": "COMPLETED",
    "createdAt": "2025-05-18T10:00:00.000Z",
    "completedAt": "2025-05-18T10:15:30.000Z",
    "expiresAt": "2025-05-18T10:30:00.000Z",
    "transactions": [
      {
        "id": "txn-1234567890",
        "txHash": "0xabc123456789...",
        "amount": "100.00",
        "confirmations": 12,
        "status": "CONFIRMED",
        "timestamp": "2025-05-18T10:15:30.000Z"
      }
    ],
    "metadata": {
      "orderId": "ORDER-12345",
      "customerEmail": "customer@example.com",
      "description": "Payment for Order #12345",
      "fiatCurrency": "USD"
    }
  }
}</code></pre>
                    </div>
                </div>
                
                <!-- List Payment Addresses -->
                <div class="endpoint">
                    <span class="badge bg-primary">GET</span>
                    <span class="endpoint-path">/merchant/payment-addresses</span>
                    <h3>List Payment Addresses</h3>
                    <p>Retrieves a list of payment addresses with optional filtering.</p>
                    
                    <h4 class="mt-4">Query Parameters</h4>
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>page</code></td>
                                <td>Integer</td>
                                <td>No</td>
                                <td>Page number (default: 1)</td>
                            </tr>
                            <tr>
                                <td><code>limit</code></td>
                                <td>Integer</td>
                                <td>No</td>
                                <td>Items per page (default: 10, max: 100)</td>
                            </tr>
                            <tr>
                                <td><code>status</code></td>
                                <td>String</td>
                                <td>No</td>
                                <td>Filter by status (ACTIVE, COMPLETED, EXPIRED)</td>
                            </tr>
                            <tr>
                                <td><code>fromDate</code></td>
                                <td>String</td>
                                <td>No</td>
                                <td>ISO8601 start date</td>
                            </tr>
                            <tr>
                                <td><code>toDate</code></td>
                                <td>String</td>
                                <td>No</td>
                                <td>ISO8601 end date</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Example Requests</h4>
                    
                    <!-- cURL Example -->
                    <div class="code-block">
                        <div class="code-header">cURL</div>
                        <pre class="code-content"><code>curl -X GET "https://eoscryptopago.com/api/v1/merchant/payment-addresses?page=1&limit=10&status=COMPLETED" \
-H "Authorization: Bearer YOUR_API_KEY"</code></pre>
                    </div>
                    
                    <!-- JavaScript Example -->
                    <div class="code-block">
                        <div class="code-header">JavaScript</div>
                        <pre class="code-content"><code>const getPaymentAddresses = async (params = {}) => {
  try {
    const queryParams = new URLSearchParams({
      page: params.page || 1,
      limit: params.limit || 10,
      status: params.status || '',
      fromDate: params.fromDate || '',
      toDate: params.toDate || ''
    }).toString();
    
    const response = await fetch(`https://eoscryptopago.com/api/v1/merchant/payment-addresses?${queryParams}`, {
      method: 'GET',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    });
    
    const data = await response.json();
    console.log('Payment addresses:', data);
    return data;
  } catch (error) {
    console.error('Error fetching payment addresses:', error);
    throw error;
  }
};</code></pre>
                    </div>
                    
                    <!-- PHP Example -->
                    <div class="code-block">
                        <div class="code-header">PHP</div>
                        <pre class="code-content"><code>function getPaymentAddresses($params = []) {
    $apiKey = 'YOUR_API_KEY';
    $queryParams = http_build_query([
        'page' => $params['page'] ?? 1,
        'limit' => $params['limit'] ?? 10,
        'status' => $params['status'] ?? '',
        'fromDate' => $params['fromDate'] ?? '',
        'toDate' => $params['toDate'] ?? ''
    ]);
    
    $url = 'https://eoscryptopago.com/api/v1/merchant/payment-addresses?' . $queryParams;
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Authorization: Bearer ' . $apiKey
    ]);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode == 200) {
        return json_decode($response, true);
    } else {
        $error = json_decode($response, true);
        throw new Exception('Error fetching payment addresses: ' . 
                           ($error['message'] ?? 'Unknown error'));
    }
}</code></pre>
                    </div>
                    
                    <h4 class="mt-4">Response Example</h4>
                    <div class="code-block">
                        <div class="code-header">JSON Response</div>
                        <pre class="code-content"><code>{
  "success": true,
  "data": {
    "items": [
      {
        "id": "a1b2c3d4-e5f6-7890-abcd-1234567890ab",
        "address": "0xA1B2C3D4E5F67890ABCD1234567890ABCDEF1234",
        "currency": "USDT",
        "expectedAmount": "100.00",
        "receivedAmount": "100.00",
        "status": "COMPLETED",
        "createdAt": "2025-05-18T10:00:00.000Z",
        "completedAt": "2025-05-18T10:15:30.000Z"
      },
      {
        "id": "b2c3d4e5-f6a7-8901-bcde-23456789abcd",
        "address": "0xB2C3D4E5F6A78901BCDE23456789ABCDEF2345",
        "currency": "USDT",
        "expectedAmount": "50.00",
        "receivedAmount": "50.00",
        "status": "COMPLETED",
        "createdAt": "2025-05-17T14:30:00.000Z",
        "completedAt": "2025-05-17T14:45:12.000Z"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "totalItems": 42,
      "totalPages": 5
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
