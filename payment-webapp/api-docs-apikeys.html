<!-- API Navigation -->
<div class="card mb-4">
    <div class="card-body">
        <nav class="nav nav-pills nav-justified">
            <a class="nav-link" href="api-docs.html"><i class="bi bi-house-door me-1"></i> Overview</a>
            <a class="nav-link" href="api-docs-payments.html"><i class="bi bi-wallet2 me-1"></i> Payments</a>
            <a class="nav-link" href="api-docs-payouts.html"><i class="bi bi-send me-1"></i> Payouts</a>
            <a class="nav-link" href="api-docs-webhooks.html"><i class="bi bi-hdd-network me-1"></i> Webhooks</a>
            <a class="nav-link active" href="api-docs-apikeys.html"><i class="bi bi-key me-1"></i> API Keys</a>
        </nav>
    </div>
</div>

<!-- API Keys Endpoints Section -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h2 id="api-keys">API Keys Endpoints</h2>
            </div>
            <div class="card-body">
                <!-- Create API Key Endpoint -->
                <div class="endpoint">
                    <span class="badge bg-success">POST</span>
                    <span class="endpoint-path">/api-keys</span>
                    <h3>Create API Key</h3>
                    <p>Creates a new API key for accessing the API.</p>
                    
                    <h4 class="mt-4">Request Parameters</h4>
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>name</code></td>
                                <td>String</td>
                                <td>Yes</td>
                                <td>Name of the API key</td>
                            </tr>
                            <tr>
                                <td><code>permissions</code></td>
                                <td>Array</td>
                                <td>No</td>
                                <td>Array of permission strings (default: all permissions)</td>
                            </tr>
                            <tr>
                                <td><code>expiresAt</code></td>
                                <td>String</td>
                                <td>No</td>
                                <td>ISO8601 datetime for key expiry</td>
                            </tr>
                            <tr>
                                <td><code>ipRestrictions</code></td>
                                <td>String</td>
                                <td>No</td>
                                <td>Comma-separated IP addresses allowed to use this key</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Example Requests</h4>
                    
                    <!-- cURL Example -->
                    <div class="code-block">
                        <div class="code-header">cURL</div>
                        <pre class="code-content"><code>curl -X POST "https://eoscryptopago.com/api/v1/api-keys" \
-H "Authorization: Bearer YOUR_API_KEY" \
-H "Content-Type: application/json" \
-d '{
  "name": "Development API Key",
  "permissions": ["read:payments", "write:payments", "read:payouts"],
  "expiresAt": "2025-12-31T23:59:59Z",
  "ipRestrictions": "192.168.1.1,10.0.0.1"
}'</code></pre>
                    </div>
                    
                    <!-- JavaScript Example -->
                    <div class="code-block">
                        <div class="code-header">JavaScript</div>
                        <pre class="code-content"><code>const createApiKey = async () => {
  try {
    const response = await fetch('https://eoscryptopago.com/api/v1/api-keys', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        name: 'Development API Key',
        permissions: ['read:payments', 'write:payments', 'read:payouts'],
        expiresAt: '2025-12-31T23:59:59Z',
        ipRestrictions: '192.168.1.1,10.0.0.1'
      })
    });
    
    const data = await response.json();
    console.log('API Key created:', data);
    return data;
  } catch (error) {
    console.error('Error creating API key:', error);
    throw error;
  }
};</code></pre>
                    </div>
                    
                    <!-- PHP Example -->
                    <div class="code-block">
                        <div class="code-header">PHP</div>
                        <pre class="code-content"><code>function createApiKey() {
    $apiKey = 'YOUR_API_KEY';
    $url = 'https://eoscryptopago.com/api/v1/api-keys';
    
    $data = [
        'name' => 'Development API Key',
        'permissions' => ['read:payments', 'write:payments', 'read:payouts'],
        'expiresAt' => '2025-12-31T23:59:59Z',
        'ipRestrictions' => '192.168.1.1,10.0.0.1'
    ];
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Authorization: Bearer ' . $apiKey,
        'Content-Type: application/json'
    ]);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode == 201) {
        return json_decode($response, true);
    } else {
        $error = json_decode($response, true);
        throw new Exception('Error creating API key: ' . 
                           ($error['message'] ?? 'Unknown error'));
    }
}</code></pre>
                    </div>
                    
                    <h4 class="mt-4">Response Example</h4>
                    <div class="code-block">
                        <div class="code-header">JSON Response</div>
                        <pre class="code-content"><code>{
  "success": true,
  "data": {
    "id": "key-a1b2c3d4-e5f6-7890-abcd-1234567890ab",
    "name": "Development API Key",
    "publicKey": "pk_a1b2c3d4e5f67890abcd",
    "secretKey": "sk_a1b2c3d4e5f67890abcdef1234567890abcdef1234567890",
    "permissions": ["read:payments", "write:payments", "read:payouts"],
    "expiresAt": "2025-12-31T23:59:59Z",
    "ipRestrictions": "192.168.1.1,10.0.0.1",
    "createdAt": "2025-05-18T12:30:00.000Z"
  }
}</code></pre>
                    </div>
                    <div class="alert alert-warning mt-3">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i>
                        <strong>Important:</strong> The <code>secretKey</code> is only shown once at creation time. You must store it securely as it can't be retrieved later.
                    </div>
                </div>
                
                <!-- List API Keys -->
                <div class="endpoint">
                    <span class="badge bg-primary">GET</span>
                    <span class="endpoint-path">/api-keys</span>
                    <h3>List API Keys</h3>
                    <p>Retrieves all API keys for your account.</p>
                    
                    <h4 class="mt-4">Example Requests</h4>
                    
                    <!-- cURL Example -->
                    <div class="code-block">
                        <div class="code-header">cURL</div>
                        <pre class="code-content"><code>curl -X GET "https://eoscryptopago.com/api/v1/api-keys" \
-H "Authorization: Bearer YOUR_API_KEY"</code></pre>
                    </div>
                    
                    <!-- JavaScript Example -->
                    <div class="code-block">
                        <div class="code-header">JavaScript</div>
                        <pre class="code-content"><code>const getApiKeys = async () => {
  try {
    const response = await fetch('https://eoscryptopago.com/api/v1/api-keys', {
      method: 'GET',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    });
    
    const data = await response.json();
    console.log('API Keys:', data);
    return data;
  } catch (error) {
    console.error('Error fetching API keys:', error);
    throw error;
  }
};</code></pre>
                    </div>
                    
                    <!-- PHP Example -->
                    <div class="code-block">
                        <div class="code-header">PHP</div>
                        <pre class="code-content"><code>function getApiKeys() {
    $apiKey = 'YOUR_API_KEY';
    $url = 'https://eoscryptopago.com/api/v1/api-keys';
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Authorization: Bearer ' . $apiKey
    ]);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode == 200) {
        return json_decode($response, true);
    } else {
        $error = json_decode($response, true);
        throw new Exception('Error fetching API keys: ' . 
                           ($error['message'] ?? 'Unknown error'));
    }
}</code></pre>
                    </div>
                    
                    <h4 class="mt-4">Response Example</h4>
                    <div class="code-block">
                        <div class="code-header">JSON Response</div>
                        <pre class="code-content"><code>{
  "success": true,
  "data": [
    {
      "id": "key-a1b2c3d4-e5f6-7890-abcd-1234567890ab",
      "name": "Development API Key",
      "publicKey": "pk_a1b2c3d4e5f67890abcd",
      "permissions": ["read:payments", "write:payments", "read:payouts"],
      "expiresAt": "2025-12-31T23:59:59Z",
      "ipRestrictions": "192.168.1.1,10.0.0.1",
      "createdAt": "2025-05-18T12:30:00.000Z",
      "lastUsedAt": "2025-05-18T14:15:22.000Z"
    },
    {
      "id": "key-b2c3d4e5-f6a7-8901-bcde-23456789abcd",
      "name": "Production API Key",
      "publicKey": "pk_b2c3d4e5f6a78901bcde",
      "permissions": ["*"],
      "expiresAt": null,
      "ipRestrictions": null,
      "createdAt": "2025-04-10T08:45:00.000Z",
      "lastUsedAt": "2025-05-18T14:30:10.000Z"
    }
  ]
}</code></pre>
                    </div>
                </div>
                
                <!-- Delete API Key -->
                <div class="endpoint">
                    <span class="badge bg-danger">DELETE</span>
                    <span class="endpoint-path">/api-keys/{id}</span>
                    <h3>Delete API Key</h3>
                    <p>Deletes an API key by its ID.</p>
                    
                    <h4 class="mt-4">Path Parameters</h4>
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>id</code></td>
                                <td>String</td>
                                <td>API key ID</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Example Requests</h4>
                    
                    <!-- cURL Example -->
                    <div class="code-block">
                        <div class="code-header">cURL</div>
                        <pre class="code-content"><code>curl -X DELETE "https://eoscryptopago.com/api/v1/api-keys/key-a1b2c3d4-e5f6-7890-abcd-1234567890ab" \
-H "Authorization: Bearer YOUR_API_KEY"</code></pre>
                    </div>
                    
                    <!-- JavaScript Example -->
                    <div class="code-block">
                        <div class="code-header">JavaScript</div>
                        <pre class="code-content"><code>const deleteApiKey = async (id) => {
  try {
    const response = await fetch(`https://eoscryptopago.com/api/v1/api-keys/${id}`, {
      method: 'DELETE',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    });
    
    if (response.ok) {
      console.log('API key deleted successfully');
      return true;
    } else {
      const errorData = await response.json();
      throw new Error(errorData.message || 'Failed to delete API key');
    }
  } catch (error) {
    console.error('Error deleting API key:', error);
    throw error;
  }
};</code></pre>
                    </div>
                    
                    <!-- PHP Example -->
                    <div class="code-block">
                        <div class="code-header">PHP</div>
                        <pre class="code-content"><code>function deleteApiKey($id) {
    $apiKey = 'YOUR_API_KEY';
    $url = 'https://eoscryptopago.com/api/v1/api-keys/' . $id;
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'DELETE');
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Authorization: Bearer ' . $apiKey
    ]);
    
    $response = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($httpCode == 200) {
        return true;
    } else {
        $error = json_decode($response, true);
        throw new Exception('Error deleting API key: ' . 
                           ($error['message'] ?? 'Unknown error'));
    }
}</code></pre>
                    </div>
                    
                    <h4 class="mt-4">Response Example</h4>
                    <div class="code-block">
                        <div class="code-header">JSON Response</div>
                        <pre class="code-content"><code>{
  "success": true,
  "message": "API key deleted successfully"
}</code></pre>
                    </div>
                </div>
                
                <!-- Available Permissions Section -->
                <div class="mt-5">
                    <h3>Available Permissions</h3>
                    <p>These are the available permissions you can assign to API keys:</p>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Permission</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>*</code></td>
                                <td>All permissions (full access)</td>
                            </tr>
                            <tr>
                                <td><code>read:payments</code></td>
                                <td>View payment addresses and transactions</td>
                            </tr>
                            <tr>
                                <td><code>write:payments</code></td>
                                <td>Create payment addresses</td>
                            </tr>
                            <tr>
                                <td><code>read:payouts</code></td>
                                <td>View payouts</td>
                            </tr>
                            <tr>
                                <td><code>write:payouts</code></td>
                                <td>Create payouts</td>
                            </tr>
                            <tr>
                                <td><code>read:webhooks</code></td>
                                <td>View webhooks</td>
                            </tr>
                            <tr>
                                <td><code>write:webhooks</code></td>
                                <td>Create, update, and delete webhooks</td>
                            </tr>
                            <tr>
                                <td><code>read:merchant</code></td>
                                <td>View merchant profile and settings</td>
                            </tr>
                            <tr>
                                <td><code>write:merchant</code></td>
                                <td>Update merchant profile and settings</td>
                            </tr>
                            <tr>
                                <td><code>read:api-keys</code></td>
                                <td>View API keys</td>
                            </tr>
                            <tr>
                                <td><code>write:api-keys</code></td>
                                <td>Create and delete API keys</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
